"use strict";var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var gdprCookie=function(){function t(){_classCallCheck(this,t),this._main_container,this._listeners_added=!1,this._cookie,this._types=new Array({type:"mandatory",text:"Cookies λειτουργικότητας",default:!0,detailsText:"Τα cookies αυτά είναι απαραίτητα γιατί επιτρέπουν την πλοήγηση στον ιστότοπό μας καθώς και τη χρήση των λειτουργιών του ιστότοπου."}),this._cookie_name="gdpr_cookie",this._expires=30,this._btn_settings,this._btn_settings_text,this._btn_hide_settings,this._btn_hide_settings_text,this._btn_accept,this._btn_accept1,this._btn_accept_text,this._intro_text="",this._settings_text="",this._class_prefix="gdpr-cookie",this._position="bottom",this.settingscont,this.messagecont}return _createClass(t,[{key:"getCookie",value:function(t){t+="=";for(var e=document.cookie.split(";"),i=0;i<e.length;i++){for(var n=e[i];" "==n.charAt(0);)n=n.substring(1);if(0==n.indexOf(t))return JSON.parse(n.substring(t.length,n.length))}}},{key:"setCookie",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._cookie_name,e=arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._expires,n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var s="expires="+n.toUTCString();document.cookie=t+"="+JSON.stringify(e)+"; "+s}},{key:"deleteCookie",value:function(t){setCookie(t,"",-1)}},{key:"check",value:function(){var t=this;if(this._cookie=this.getCookie(this._cookie_name),!this._cookie||!this._cookie.accepted){var e={accepted:!1};if(this._types.length>1)for(var i=1;i<this._types.length;i++)e[""+this._types[i].type]=this._types[i].default;this.setCookie(this._cookie_name,e,this._expires),this._cookie=this.getCookie(this._cookie_name)}document.addEventListener("DOMContentLoaded",function(e){t.domLoaded()})}},{key:"domLoaded",value:function(t){this._main_container=document.createElement("div"),this._main_container.style.display="none",this._main_container.classList.add("gdpr-cookie-container"),this._main_container.classList.add(this._class_prefix+"-container");var e=document.createElement("div");e.classList.add("gdpr-cookie-inner-container"),this.messagecont=document.createElement("div"),this.messagecont.id="gdpr-cookie-message";for(var i=document.createElement("table"),n=document.createElement("tbody"),s=0;s<1;s++){for(var o=document.createElement("tr"),c=0;c<2;c++){var a=void 0;(a=document.createElement("td")).setAttribute("valign","middle"),0==c?(a.setAttribute("align","left"),a.innerHTML=this._intro_text):(this._btn_settings=document.createElement("button"),this._btn_settings.id="gdpr-show-cookie-settings",this._btn_settings.innerText=this._btn_settings_text,a.appendChild(this._btn_settings)),o.appendChild(a)}n.appendChild(o)}i.appendChild(n),this.messagecont.appendChild(i),this.settingscont=document.createElement("div"),this.settingscont.style.display="none",this.settingscont.id="gdpr-cookie-settings",i=document.createElement("table"),n=document.createElement("tbody");for(var _=0;_<1;_++){for(var d=document.createElement("tr"),r=0;r<2;r++){var h=void 0;if((h=document.createElement("td")).setAttribute("valign","middle"),0==r){h.setAttribute("align","left");var l=document.createElement("p");l.innerHTML=this._settings_text,h.appendChild(l);for(var p=document.createElement("table"),u=document.createElement("tbody"),g=void 0,m=void 0,y=void 0,k=void 0,f=0;f<this._types.length;f++){g=document.createElement("tr");for(var b=0;b<2;b++)(m=document.createElement("td")).setAttribute("valign","top"),0==b?((y=document.createElement("input")).type="checkbox",0==f?(y.disabled=!0,y.checked=!0):y.checked=this._cookie[this._types[f].type],y.id="gdpr-cookie-checkbox-"+this._types[f].type,m.appendChild(y)):(k=document.createTextNode(this._types[f].text),m.appendChild(k),(k=document.createElement("p")).classList.add("details-txt"),k.innerHTML="<i>"+this._types[f].detailsText+"</i>",m.appendChild(k)),g.appendChild(m);u.appendChild(g)}p.appendChild(u),h.appendChild(p)}else{var x=void 0;x=document.createElement("p"),this._btn_hide_settings=document.createElement("button"),this._btn_hide_settings.id="gdpr-hide-cookie-settings",this._btn_hide_settings.innerText=this._btn_hide_settings_text,x.appendChild(this._btn_hide_settings),h.appendChild(x),this._btn_accept1=document.createElement("button"),this._btn_accept1.id="gdpr-accept-btn",this._btn_accept1.innerText=this._btn_accept_text,h.appendChild(this._btn_accept1)}d.appendChild(h)}n.appendChild(d)}i.appendChild(n),this.settingscont.appendChild(i),e.appendChild(this.messagecont),e.appendChild(this.settingscont),this._main_container.appendChild(e),document.body.appendChild(this._main_container),this.showcookie()}},{key:"showcookie",value:function(){this._cookie.accepted||(this._main_container.style.display="block"),this.addlisteners()}},{key:"addlisteners",value:function(){var t=this;this._listeners_added||(this._listeners_added=!0,this._btn_hide_settings.addEventListener("click",function(e){t.settingscont.style.display="none",t.messagecont.style.display="block"}),this._btn_settings.addEventListener("click",function(e){t.settingscont.style.display="block",t.messagecont.style.display="none"}),this._btn_accept1.addEventListener("click",function(e){if(t.settingscont.style.display="block",t.messagecont.style.display="none",t._cookie.accepted=!0,t._types.length>1)for(var i=1;i<t._types.length;i++)t._cookie[""+t._types[i].type]=document.getElementById("gdpr-cookie-checkbox-"+t._types[i].type).checked;t.setCookie(t._cookie_name,t._cookie,t._expires),t._main_container.style.display="none"}))}},{key:"cookie",get:function(){return this._cookie}},{key:"cookie_name",get:function(){return this._cookie_name},set:function(t){this._cookie_name=t}},{key:"expires",get:function(){return this._expires},set:function(t){if(!/^[0-9]*$/i.test(t))throw new Error("Only numbers allowed");this._expires=parseInt(t)}},{key:"types",get:function(){return this._types},set:function(t){if(!Array.isArray(t))throw new Error("Value must be an array of objects");for(var e=0;e<t.length;e++)this._types.push(t[e])}},{key:"position",get:function(){return this._position},set:function(t){"top"!=t&&"bottom"!=t&&"full"!=t||(this._position=t,this._class_prefix="gdpr-cookie-"+t)}},{key:"intro_text",get:function(){return this._intro_text},set:function(t){this._intro_text=t}},{key:"cookie_type_mandatory_text",get:function(){return this._types[0].text},set:function(t){this._types[0].text=t}},{key:"cookie_type_mandatory_detailsText",get:function(){return this._types[0].detailsText},set:function(t){this._types[0].detailsText=t}},{key:"settings_text",get:function(){return this._settings_text},set:function(t){this._settings_text=t}},{key:"btn_settings_text",get:function(){return this._btn_settings_text},set:function(t){this._btn_settings_text=t}},{key:"btn_hide_settings_text",get:function(){return this._btn_hide_settings_text},set:function(t){this._btn_hide_settings_text=t}},{key:"btn_accept_text",get:function(){return this._btn_accept_text},set:function(t){this._btn_accept_text=t}}]),t}();